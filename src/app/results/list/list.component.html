<div style="padding:10px;">
    <p class="background-prompt" *ngIf="!(dataSource | async) && !loading">No results available. Please start a search...</p>

    <p class="background-prompt" *ngIf="!(dataSource | async) && loading"><mat-spinner></mat-spinner></p>

    <div class="list">
        <div *ngFor="let mediaobject of (dataSource | async | OrderByScorePipe); trackBy: trackByFunction" class="object" draggable="true" fxLayout="row" fxLayoutWrap fxLayoutGap="4px">
            <div *ngFor="let segment of mediaobject.segments | OrderBySegmentPipe" class="{{segment.marked ? 'segment marked' : 'segment'}}" (mouseenter)="focus = segment" (mouseleave)="focus = null" [style.background]="backgroundForSegment(segment)">

                <img src="{{_resolver.pathToThumbnailForSegment(mediaobject.mediatype, segment.mediaSegment)}}" draggable="false" (click)="onTileClicked(segment)"/>

                <div  *ngIf="inFocus(segment)" class="header" fxLayout="row" fxLayoutAlign="space-evenly">
                    <button *ngFor="let tag of selectionService.availableTags" mat-icon-button matTooltip="Add '{{tag.name}}' tag" (click)="onTagButtonClicked(segment,tag)" (contextmenu)="onTagButtonRightClicked($event, segment,tag)">
                        <mat-icon [style.color]="selectionService.hasTag(segment.segmentId,tag) ? tag.colorForRelevance(1.0) : ''">album</mat-icon>
                    </button>
                </div>

                <div *ngIf="inFocus(segment)" class="footer" fxLayout="row" fxLayoutAlign="space-evenly">
                    <button *ngIf="showsubmit(segment)" mat-icon-button (click)="onSubmitButtonClicked(segment)" matTooltip="Submit segment to VBS">
                        <mat-icon>send</mat-icon>
                    </button>

                    <button mat-icon-button (click)="onDetailsButtonClicked(segment)" matTooltip="Show details">
                        <mat-icon>remove_red_eye</mat-icon>
                    </button>

                    <button mat-icon-button (click)="onInformationButtonClicked(segment)" matTooltip="Feature information">
                        <mat-icon>help</mat-icon>
                    </button>

                    <button mat-icon-button (click)="onMltButtonClicked(segment)" matTooltip="More-like-this">
                        <mat-icon>youtube_searched_for</mat-icon>
                    </button>

                    <button mat-icon-button (click)="onNeighborsButtonClicked(segment)" (contextmenu)="onNeighborsButtonRightClicked($event, segment)" matTooltip="Load neighboring segments">
                        <mat-icon>settings_ethernet</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>